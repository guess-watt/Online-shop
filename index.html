<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Shops Online </title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .page {
            display: none;
        }
        .active-page {
            display: block;
        }
        .material-card {
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .material-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .material-input {
            border: none;
            border-bottom: 2px solid #ddd;
            border-radius: 0;
            padding: 10px 0;
            transition: border-color 0.3s;
        }
        .material-input:focus {
            border-color: #0d6efd;
            box-shadow: none;
        }
        .material-btn {
            border-radius: 25px;
            padding: 10px 30px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .snackbar {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
        }
        .snackbar.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 100px 0;
            margin-bottom: 50px;
        }
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .admin-badge {
            background: #ffc107;
            color: #000;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav id="mainNavbar" class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#" onclick="showPage('homePage')">CZ Academy
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('homePage')">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('shopPage')">Shop</a>
                    </li>
                    <li id="adminNavItem" class="nav-item" style="display: none;">
                        <a class="nav-link" href="#" onclick="showPage('addProductPage')">Add Product</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item position-relative">
                        <a class="nav-link" href="#" onclick="showPage('cartPage')">
                            <i class="material-icons">shopping_cart</i>
                            <span id="cartBadge" class="cart-badge">0</span>
                        </a>
                    </li>
                    <li id="authNavItem" class="nav-item dropdown">
                        <!-- Dynamic content will be inserted by JavaScript -->
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Snackbar for notifications -->
    <div id="snackbar" class="snackbar"></div>

    <!-- Pages -->
    <!-- Login Page -->
    <div id="loginPage" class="page container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card material-card">
                    <div class="card-body p-5">
                        <h2 class="text-center mb-4">Login</h2>
                        <form id="loginForm">
                            <div class="mb-3">
                                <input type="email" class="form-control material-input" id="loginEmail" 
                                       placeholder="Email" required>
                            </div>
                            <div class="mb-3">
                                <input type="password" class="form-control material-input" id="loginPassword" 
                                       placeholder="Password" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 material-btn">Login</button>
                        </form>
                        <div class="text-center mt-3">
                            <p>Don't have an account? <a href="#" onclick="showPage('registerPage')">Register here</a></p>
                        </div>
                        <div class="text-center mt-3">
                            <small class="text-muted">Admin Demo: admin@gmail.com / admin123</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Registration Page -->
    <div id="registerPage" class="page container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card material-card">
                    <div class="card-body p-5">
                        <h2 class="text-center mb-4">Register</h2>
                        <form id="registerForm">
                            <div class="mb-3">
                                <input type="text" class="form-control material-input" id="registerName" 
                                       placeholder="Full Name" required>
                            </div>
                            <div class="mb-3">
                                <input type="email" class="form-control material-input" id="registerEmail" 
                                       placeholder="Email" required>
                            </div>
                            <div class="mb-3">
                                <input type="password" class="form-control material-input" id="registerPassword" 
                                       placeholder="Password (min. 6 characters)" minlength="6" required>
                            </div>
                            <div class="mb-3">
                                <input type="password" class="form-control material-input" id="registerConfirmPassword" 
                                       placeholder="Confirm Password" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 material-btn">Register</button>
                        </form>
                        <div class="text-center mt-3">
                            <p>Already have an account? <a href="#" onclick="showPage('loginPage')">Login here</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="homePage" class="page">
        <div class="hero-section text-center">
            <div class="container">
                <h1 class="display-4 fw-bold mb-4">Welcome to Sports Shops Online</h1>
                <p class="lead mb-4">Discover amazing products at great prices</p>
                <button class="btn btn-light btn-lg material-btn" onclick="showPage('shopPage')">
                    Start Shopping <i class="material-icons">arrow_forward</i>
                </button>
            </div>
        </div>
        
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-md-4 mb-4">
                    <div class="card material-card h-100">
                        <div class="card-body">
                            <i class="material-icons display-4 text-primary">local_shipping</i>
                            <h4 class="mt-3">Free Shipping</h4>
                            <p>Free shipping on orders over $50</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card material-card h-100">
                        <div class="card-body">
                            <i class="material-icons display-4 text-success">security</i>
                            <h4 class="mt-3">Secure Payment</h4>
                            <p>Your payment information is safe with us</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card material-card h-100">
                        <div class="card-body">
                            <i class="material-icons display-4 text-warning">support_agent</i>
                            <h4 class="mt-3">24/7 Support</h4>
                            <p>We're here to help you anytime</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shop Page -->
    <div id="shopPage" class="page container mt-4">
        <h2 class="mb-4">Our Products</h2>
        <div id="productsGrid" class="row">
            <!-- Products will be dynamically inserted here -->
        </div>
    </div>

    <!-- Add Product Page -->
    <div id="addProductPage" class="page container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card material-card">
                    <div class="card-body p-5">
                        <h2 class="text-center mb-4">Add New Product</h2>
                        <form id="addProductForm">
                            <div class="mb-3">
                                <input type="text" class="form-control material-input" id="productName" 
                                       placeholder="Product Name" required>
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control material-input" id="productPrice" 
                                       placeholder="Price" step="0.01" required>
                            </div>
                            <div class="mb-3">
                                <textarea class="form-control material-input" id="productDescription" 
                                          placeholder="Description" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <input type="text" class="form-control material-input" id="productImage" 
                                       placeholder="Image URL" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 material-btn">Add Product</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Product Page -->
    <div id="editProductPage" class="page container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card material-card">
                    <div class="card-body p-5">
                        <h2 class="text-center mb-4">Edit Product</h2>
                        <form id="editProductForm">
                            <input type="hidden" id="editProductId">
                            <div class="mb-3">
                                <input type="text" class="form-control material-input" id="editProductName" required>
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control material-input" id="editProductPrice" 
                                       step="0.01" required>
                            </div>
                            <div class="mb-3">
                                <textarea class="form-control material-input" id="editProductDescription" 
                                          rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <input type="text" class="form-control material-input" id="editProductImage" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 material-btn">Update Product</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Page -->
    <div id="cartPage" class="page container mt-4">
        <h2 class="mb-4">Your Shopping Cart</h2>
        <div id="cartItems">
            <!-- Cart items will be dynamically inserted here -->
        </div>
        <div class="text-end mt-4">
            <h4>Total: $<span id="cartTotal">0.00</span></h4>
            <button class="btn btn-success btn-lg material-btn mt-2">Checkout</button>
        </div>
    </div>

    <!-- Bootstrap & JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Data initialization
        function initializeData() {
            if (!localStorage.getItem('users')) {
                const defaultUsers = [
                    {
                        id: 1,
                        name: "Admin User",
                        email: "admin@gmail.com",
                        password: "admin123",
                        isAdmin: true
                    }
                ];
                localStorage.setItem('users', JSON.stringify(defaultUsers));
            }

            if (!localStorage.getItem('products')) {
                const defaultProducts = [
                    {
        id: 1,
        name: "Football",
        price: 29.99,
        description: "Official size and weight football for outdoor games.",
        image: "https://platform.bavarianfootballworks.com/wp-content/uploads/sites/24/chorus/uploads/chorus_asset/file/23935041/1241918497.jpg?quality=90&strip=all&crop=0%2C0%2C100%2C100&w=2400"
    },
    {
        id: 2,
        name: "Cricket Bat",
        price: 59.99,
        description: "Premium willow cricket bat for professional and amateur players.",
        image: "https://shop.teamsg.in/cdn/shop/files/Untitled_design_55_a6d392ad-1949-4b38-85ba-c201a983d614.png?v=1745390244"
    },
    {
        id: 3,
        name: "Chess Board",
        price: 19.99,
        description: "Classic wooden chess board with detailed pieces.",
        image: "https://www.officialstaunton.com/cdn/shop/articles/prestige.jpg?v=1725023843"
    },
    {
        id: 4,
        name: "Chess Clock",
        price: 39.99,
        description: "Digital chess clock with countdown timer for tournaments.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRKizSlhcGZTMoPJibmZ7WmRbAyQFWVC4DJqw&s"
    },
    {
        id: 5,
        name: "Basketball",
        price: 24.99,
        description: "Official size basketball for indoor and outdoor courts.",
        image: "https://m.media-amazon.com/images/I/81UNGfmFPHL._AC_UF894,1000_QL80_.jpg"
    },
    {
        id: 6,
        name: "Volleyball",
        price: 22.99,
        description: "Durable volleyball suitable for beach and indoor games.",
        image: "https://www.niviasports.com/cdn/shop/files/2B0A1847_f28487aa-de26-43de-b86f-5c4d171402df.jpg?v=1728559966&width=1445"
    },
    {
        id: 7,
        name: "Cricket Ball",
        price: 14.99,
        description: "High-quality leather cricket ball for matches and practice.",
        image: "https://nwscdn.com/media/catalog/product/cache/h900xw900/r/e/redfortressball-main.jpg"
    },
    {
        id: 8,
        name: "Football Boots",
        price: 79.99,
        description: "Comfortable football boots with excellent grip for all surfaces.",
        image: "https://images-cdn.ubuy.co.in/66d33fdfcf9b394b164d9abf-unitysow-football-boots-men-39-s.jpg"
    }
                ];
                localStorage.setItem('products', JSON.stringify(defaultProducts));
            }

            // Initialize cart for current user if needed
            const loggedInUser = localStorage.getItem('loggedInUser');
            if (loggedInUser && !localStorage.getItem(`cart_${loggedInUser}`)) {
                localStorage.setItem(`cart_${loggedInUser}`, JSON.stringify([]));
            }
        }

        // Show specific page and hide others
        function showPage(pageId) {
            // Check authentication for protected pages
            const protectedPages = ['homePage', 'shopPage', 'addProductPage', 'editProductPage', 'cartPage'];
            const loggedInUser = localStorage.getItem('loggedInUser');
            
            if (protectedPages.includes(pageId) && !loggedInUser) {
                showPage('loginPage');
                showSnackbar('Please login first');
                return;
            }

            // Check admin access
            if (pageId === 'addProductPage' || pageId === 'editProductPage') {
                const user = getUserByEmail(loggedInUser);
                if (!user || !user.isAdmin) {
                    showPage('shopPage');
                    showSnackbar('Admin access required');
                    return;
                }
            }

            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active-page');
            });

            // Show requested page
            document.getElementById(pageId).classList.add('active-page');

            // Load page-specific content
            switch(pageId) {
                case 'shopPage':
                    renderProducts();
                    break;
                case 'cartPage':
                    renderCart();
                    break;
                case 'homePage':
                    updateNavbar();
                    break;
            }
        }

        // Snackbar notification
        function showSnackbar(message) {
            const snackbar = document.getElementById('snackbar');
            snackbar.textContent = message;
            snackbar.classList.add('show');
            setTimeout(() => {
                snackbar.classList.remove('show');
            }, 3000);
        }

        // User management
        function getUserByEmail(email) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            return users.find(user => user.email === email);
        }

        function registerUser(name, email, password) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            // Check if email already exists
            if (users.find(user => user.email === email)) {
                return { success: false, message: 'Email already exists' };
            }

            // Create new user
            const newUser = {
                id: Date.now(),
                name,
                email,
                password,
                isAdmin: false
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            return { success: true, message: 'Registration successful' };
        }

        function loginUser(email, password) {
            const user = getUserByEmail(email);
            if (user && user.password === password) {
                localStorage.setItem('loggedInUser', email);
                localStorage.setItem(`cart_${email}`, JSON.stringify([]));
                return { success: true, user };
            }
            return { success: false, message: 'Invalid credentials' };
        }

        function logoutUser() {
            localStorage.removeItem('loggedInUser');
            showPage('loginPage');
            updateNavbar();
            showSnackbar('Logged out successfully');
        }

        // Update navbar based on login status
        function updateNavbar() {
            const loggedInUser = localStorage.getItem('loggedInUser');
            const authNavItem = document.getElementById('authNavItem');
            const adminNavItem = document.getElementById('adminNavItem');

            if (loggedInUser) {
                const user = getUserByEmail(loggedInUser);
                authNavItem.innerHTML = `
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        ${user.name} ${user.isAdmin ? '<span class="badge admin-badge ms-1">Admin</span>' : ''}
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="logoutUser()">Logout</a></li>
                    </ul>
                `;
                
                // Show admin menu if user is admin
                adminNavItem.style.display = user.isAdmin ? 'block' : 'none';
            } else {
                authNavItem.innerHTML = `
                    <a class="nav-link" href="#" onclick="showPage('loginPage')">Login</a>
                `;
                adminNavItem.style.display = 'none';
            }

            updateCartBadge();
        }

        // Product management
        function getProducts() {
            return JSON.parse(localStorage.getItem('products') || '[]');
        }

        function saveProducts(products) {
            localStorage.setItem('products', JSON.stringify(products));
        }

        function addProduct(name, price, description, image) {
            const products = getProducts();
            const newProduct = {
                id: Date.now(),
                name,
                price: parseFloat(price),
                description,
                image
            };
            products.push(newProduct);
            saveProducts(products);
            return newProduct;
        }

        function updateProduct(id, name, price, description, image) {
            const products = getProducts();
            const index = products.findIndex(product => product.id === id);
            if (index !== -1) {
                products[index] = { id, name, price: parseFloat(price), description, image };
                saveProducts(products);
                return true;
            }
            return false;
        }

        function deleteProduct(id) {
            const products = getProducts();
            const filteredProducts = products.filter(product => product.id !== id);
            saveProducts(filteredProducts);
        }

        function renderProducts() {
            const products = getProducts();
            const productsGrid = document.getElementById('productsGrid');
            const loggedInUser = localStorage.getItem('loggedInUser');
            const user = getUserByEmail(loggedInUser);
            const isAdmin = user && user.isAdmin;

            productsGrid.innerHTML = '';

            products.forEach(product => {
                const productCard = `
                    <div class="col-md-4 mb-4">
                        <div class="card material-card h-100">
                            <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 200px; object-fit: cover;">
                            <div class="card-body">
                                <h5 class="card-title">${product.name}</h5>
                                <p class="card-text">${product.description}</p>
                                <p class="card-text"><strong>$${product.price.toFixed(2)}</strong></p>
                                <button class="btn btn-primary material-btn" onclick="addToCart(${product.id})">
                                    Add to Cart
                                </button>
                                ${isAdmin ? `
                                    <button class="btn btn-warning material-btn mt-2" onclick="editProduct(${product.id})">
                                        Edit
                                    </button>
                                    <button class="btn btn-danger material-btn mt-2" onclick="deleteProductConfirm(${product.id})">
                                        Delete
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
                productsGrid.innerHTML += productCard;
            });
        }

        // Cart management
        function getCart() {
            const loggedInUser = localStorage.getItem('loggedInUser');
            return JSON.parse(localStorage.getItem(`cart_${loggedInUser}`) || '[]');
        }

        function saveCart(cart) {
            const loggedInUser = localStorage.getItem('loggedInUser');
            localStorage.setItem(`cart_${loggedInUser}`, JSON.stringify(cart));
            updateCartBadge();
        }

        function addToCart(productId) {
            const cart = getCart();
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ productId, quantity: 1 });
            }
            
            saveCart(cart);
            showSnackbar('Product added to cart');
        }

        function updateCartQuantity(productId, quantity) {
            if (quantity <= 0) {
                removeFromCart(productId);
                return;
            }

            const cart = getCart();
            const item = cart.find(item => item.productId === productId);
            if (item) {
                item.quantity = quantity;
                saveCart(cart);
                renderCart();
            }
        }

        function removeFromCart(productId) {
            const cart = getCart();
            const filteredCart = cart.filter(item => item.productId !== productId);
            saveCart(filteredCart);
            renderCart();
            showSnackbar('Product removed from cart');
        }

        function renderCart() {
            const cart = getCart();
            const products = getProducts();
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');

            cartItems.innerHTML = '';
            let total = 0;

            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-center">Your cart is empty</p>';
                cartTotal.textContent = '0.00';
                return;
            }

            cart.forEach(cartItem => {
                const product = products.find(p => p.id === cartItem.productId);
                if (product) {
                    const itemTotal = product.price * cartItem.quantity;
                    total += itemTotal;

                    const cartItemElement = `
                        <div class="card material-card mb-3">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-md-2">
                                        <img src="${product.image}" alt="${product.name}" class="img-fluid" style="max-height: 80px;">
                                    </div>
                                    <div class="col-md-4">
                                        <h5>${product.name}</h5>
                                        <p class="text-muted">$${product.price.toFixed(2)}</p>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="input-group">
                                            <button class="btn btn-outline-secondary" onclick="updateCartQuantity(${product.id}, ${cartItem.quantity - 1})">-</button>
                                            <input type="number" class="form-control text-center" value="${cartItem.quantity}" min="1" 
                                                   onchange="updateCartQuantity(${product.id}, parseInt(this.value))">
                                            <button class="btn btn-outline-secondary" onclick="updateCartQuantity(${product.id}, ${cartItem.quantity + 1})">+</button>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <h5>$${itemTotal.toFixed(2)}</h5>
                                    </div>
                                    <div class="col-md-1">
                                        <button class="btn btn-danger btn-sm" onclick="removeFromCart(${product.id})">
                                            <i class="material-icons">delete</i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    cartItems.innerHTML += cartItemElement;
                }
            });

            cartTotal.textContent = total.toFixed(2);
        }

        function updateCartBadge() {
            const cart = getCart();
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartBadge').textContent = totalItems;
        }

        // Product editing
        function editProduct(productId) {
            const products = getProducts();
            const product = products.find(p => p.id === productId);
            
            if (product) {
                document.getElementById('editProductId').value = product.id;
                document.getElementById('editProductName').value = product.name;
                document.getElementById('editProductPrice').value = product.price;
                document.getElementById('editProductDescription').value = product.description;
                document.getElementById('editProductImage').value = product.image;
                
                showPage('editProductPage');
            }
        }

        function deleteProductConfirm(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                deleteProduct(productId);
                renderProducts();
                showSnackbar('Product deleted successfully');
            }
        }

        // Event listeners
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const result = loginUser(email, password);
            if (result.success) {
                showPage('homePage');
                updateNavbar();
                showSnackbar(`Welcome back, ${result.user.name}!`);
            } else {
                showSnackbar(result.message);
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (password !== confirmPassword) {
                showSnackbar('Passwords do not match');
                return;
            }

            if (password.length < 6) {
                showSnackbar('Password must be at least 6 characters long');
                return;
            }

            const result = registerUser(name, email, password);
            if (result.success) {
                showSnackbar(result.message);
                showPage('loginPage');
                this.reset();
            } else {
                showSnackbar(result.message);
            }
        });

        document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('productName').value;
            const price = document.getElementById('productPrice').value;
            const description = document.getElementById('productDescription').value;
            const image = document.getElementById('productImage').value;

            addProduct(name, price, description, image);
            showSnackbar('Product added successfully');
            this.reset();
            showPage('shopPage');
        });

        document.getElementById('editProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const id = parseInt(document.getElementById('editProductId').value);
            const name = document.getElementById('editProductName').value;
            const price = document.getElementById('editProductPrice').value;
            const description = document.getElementById('editProductDescription').value;
            const image = document.getElementById('editProductImage').value;

            if (updateProduct(id, name, price, description, image)) {
                showSnackbar('Product updated successfully');
                showPage('shopPage');
            }
        });

        // Initialize application
        function init() {
            initializeData();
            updateNavbar();
            
            const loggedInUser = localStorage.getItem('loggedInUser');
            if (loggedInUser) {
                showPage('homePage');
            } else {
                showPage('loginPage');
            }
        }

        // Start the application
        init();
    </script>
</body>
</html>
